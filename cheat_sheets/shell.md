# Shell cheat sheets

## Горячие клавиши
* ```Ctrl + Alt + T``` - открыть консоль
* ```Ctrl + Shift + T``` - новая вкладка в терминале
* ```Ctrl + Shift + C / V``` - работа с текстом в терминале
* ```Ctrl + H``` - показать / скрыть скрытые файлы
* ```Ctrl + R``` - поиск по ранее выполненным командам
* ```Alt + <TAB>``` - переключение между открытыми приложениями
* ```Ctrl + <TAB>``` - переключение по вкладкам браузера

## UNIX
* 1983 - Ричард Стокман анонсировал GNU
* 1991 - Линус Торвальд зарелизил первую версию ядра Linux Kernel

Linux - это **ядро**

Дистрибутив - это ОС, включающая в себя:
* Ядро Linux
* Библиотеки и утилиты
* Приложения
* Программы для установки и конфигурационные файлы системы

## Оболочка Linux
Shell (терминал, консоль, командная строка) - командная оболочка - программа, которая принимает команды, введенные с клавиатуры, и передает их ОС для выполнения.

На Linux, по умолчанию, язык оболочки называется BASH (Bourne Again Shell или улучшенный sh - первоначальная командная оболочка для Unix).
Bash - командная оболочка из проекта GNU.

Gnome-terminal или просто terminal - эмулятор терминала для взаимодействия пользователя с командной оболочкой.
* ```$``` - shell prompt - приглашение к вводу
* ```#``` - сеанс суперпользователя (sudo)
* ```reset``` - сброс терминала
* ```exit``` - выход из терминала

**Структура команды:** ```<команда> -<ключ> <значение>```

* ```man <команда>``` - мануал (справочное руководство) по команде
* ```<команда> --help``` - вывод инструкции по использованию
* ```help <команда>``` - справка по команде
* ```time <команда>``` - исполнить команду и составить статистику о том, сколько времени потрачено на исполнение
* ```htop``` - диспетчер задач
* ```clear``` - очистка экрана
* ```history``` - выводит содержимое истории команд
  * ```history | less```
  * ```history | grep /user/bin```
* ```type <команда>``` - получение типа команды
* ```which``` - определение местоположения выполняемого файла

## Вывод информации о системе
* ```whoami``` - имя пользователя
* ```uptime``` - состояние системы
* ```uname -a``` - информация о ядре ОС
* ```lsb_release -a``` - информация об ОС
* ```yelp``` - руководство пользователя Ubuntu
* ```free``` - объем памяти и ее использование
* ```df``` - объем свободного пространства на дисках
* ```sudo dmidecode``` - вывод информации об аппаратном обеспечении
* ```sudo lshw -C```
* ```du -ha``` - показать размер на диске для директорий и их содержимого

## Остановка системы
* ```halt``` - остановить
* ```poweroff``` - выключить питание
* ```reboot``` - перезагрузить
* ```shutdown``` - объединение первых трех + можно указать время:
  * ```sudo shutdown -h now``` - остановка
  * ```sudo shutdown -r now``` - перезагрузка

## Привилегии
[Chmod Calculator](https://chmodcommand.com/)

Unix - многопользовательская ОС. Пользователи могут объединяться в группы.

```id``` - выводит информацию об идентичности пользователя (uid, grid, groups)

Права доступа к файлам и каталогам определяются в терминах прав на чтение, запись и выполнения:
```
ls -l foo.txt
# -rw-rw-r--   1       me       me        100       2018-03-06  14:52       foo.txt
# Права      Число  Владелец  Группа     Размер     Дата и время           имя файла
# доступа    жестких         владельца    файла     последнего изменения
# к файлу    ссылок
#            на файл
```

<p align="center">
  <img width="400" src="pictures/chmod.png"/>
</p>

**chmod** - изменяет режим доступа к файлу

```
./my_scr.sh
# Permition denied

# Тогда:
chmod +x my_scr.sh
./my_sch.sh 
```

chmod также поддерживает символическую форму определения режимов доступа к файлу. Символическая форма записи делится на 3 части:
* для кого устанавливается разрешения
* какие операции с разрешениями будут выполняться
* на какие разрешения эти операции будут влиять

**umask** - определение разрешения доступа к файлам по умолчанию, которые устанавливаются для файла при его создании.

**chown** - изменение владельца и группы файла

**chown** - изменение группы файла

## Изменение идентичности

```passwd``` - изменение пароля пользователя

Есть 3 способа изменения идентичности пользователя:
1. Выйти из системы и войти с учетными данными другого пользователя.
2. Воспользоваться командой **su**.
3. Воспользоваться командой **sudo**.

**su** - запускает командную оболочку от имени другого пользователя.
* ```su [- [|]] <пользователь>```
* ```su -``` - суперпользователь
* ```su -с <команда>```

**sudo** - запускает командную оболочку от имени суперпользователя.
* ```sudo <команда>```
* sudo не запускает новую командную оболочку и не загружает окружение другого пользователя
* ```sudo -l``` - показывает, какие привилегии дает команда sudo

## Навигация и исследование системы
Директория в Unix считается типом файла.

* ```pwd``` - print working directory (вывести текущую директорию)
* ```cd <dir>``` - переход в другую директорию
  * ```cd ./``` - перейти в ту же директорию :)
  * ```cd -``` - перейти в предыдущий рабочий каталог
* ```ls <dir>``` - показать содержимое папки
  * ```ls -l <dir>``` - длинный формат вывода
  * ```ls -a <dir>``` - показать все файлы и папки (включая скрытые)
  * ```ls -A <dir>``` - almost all (не выводит . и ..)
  * ```ls -t <dir>``` - сортировать по времени
  * ```ls -d <dir>``` - информация о каталоге, а не его содержимом
  * ```ls -S <dir>``` - сортировать по размеру

Пути:
* Абсолютные - начинается с корневого каталога и перечисляет ветви дерева до файла или каталога.
* Относительные - начинается в рабочем (текущем) каталоге (с . или ..)

Псевдонимы директорий:
* ```.``` - текущая директория 
* ```..``` - родительская директория
* ```~``` - домашняя директория пользователя
* ```/``` - корневая директория системы
  * [Назначение основных директорий в файловой системе Linux](https://admin-gu.ru/os/linux/naznacheniya-onovnykh-katalogov-direktorij-papok-v-fajlovoj-sisteme-linux)

В Windows для каждого устройства хранения создается отдельная файловая система, в Unix-системах всегда только одна файловая система, устройства хранения монтируются к разным точкам системы.

У скрытых файлов имя начинается с точки.

Утилита tree:
* ```tree```
* ```tree /path/to/folder```
* ```tree -dA /path/to/folder```
* ```tree -LhaC 3``` - показать структуру директории на 3 уровня вглубь

## Операции с файлами и каталогами
* ```touch``` - команда для установки времени последнего изменения файла
  * ```touch <имя_файла>``` - создает пустой файл и меняет время доступа к нему
* ```echo "some text" > <filename>"``` - создаст текстовый файл с текстом "some text"
* ```file <file>``` - покажет тип файла
  * ```file *``` - покажет типы всех файлов в директории
* ```cp``` - копирование файлов и папок
  * ```cp <dir1> <dir2>``` - dir1 - откуда, dir2 - куда
  * ```cp -R _ _``` - скопировать дирректорию и все ее содержимое (рекурсивно)
  * ```cp -u _ _``` - копировать только файлы, которых нет в каталоге
* ```mv``` - перенос/переименование файлов и папок
  * ```mv <file1> <file2>``` - переименует file1 в file2
  * ```mv <file> <dir>``` - перенесет file в dir
  * ```mv <dir1> <dir2>``` - переименует dir1 в dir2
* ```rm``` - удаление файлов
  * ```rm <file>``` - удалит file
  * ```rm -r <dir>``` - удалит dir (рекурсивно)
  * ```rm -f <file>``` - удалит file (force)

## Вывод содержимого файла
* ```cat <file>``` - вывод всего файла (объединения файлов)
  * ```cat -n <file>``` - пронумеровать строки в выводе
* ```less <file>``` - вывод содержимого файла
* ```head <file>``` - первые 10 строк файла
  * ```head -n 100 <file>``` - первые 100 строк файла
* ```tail <file>``` - последние 10 строк файла
  * ```tail -n 100 <file>``` - последние 100 строк файла

## Подстановки
**Wildcards** - шаблоны поиска

* ```*``` - астерикс соответствует любому количеству символов в названии файла
  * ```ls *.json``` - найдет все файлы с расширением json
  * ```echo D*``` - Desktop, Documents
  * ```echo /usr/*/share```
* ```?``` - соответствует одному любому символу
  * ```ls ???.txt``` - найдет все файлы, в имени которых 3 символы
* ```[символы]``` - по одному из множества
  * ```[abc]*``` - все имена файлов, начинающиеся с 'a', 'b', 'c'
* ```[[:класс:]]``` - по одному символу, принадлежащему классу
  * alnum - алфавитно-цифровые символы
  * alpha - алфавитные символы
  * digit - цифровые символы
  * lower - буквы в нижнем регистре
  * upper - буквы в верхнем регистре
* ```echo $((выражение))```
  * ```echo $((2 + 2))``` ==> 4
* ```echo {z..a}```
  * ```echo N_{1..3}``` ==> N_1, N_2, N_3
  * ```mkdir {2007..2009}-{01..12}```
* ```echo $USER```
  * ```echo $(ls)```

## Соответствие консольных команд Windows и Linux

[Сответствие консольных команд Windows и Linux](https://white55.ru/cmd-sh.html)
