# Regex cheat sheets

Регулярные выражения — формальный язык поиска и манипуляций с подстроками в тексте, 
основанный на использовании метасимволов (wildcard characters).

### Метасимволы (экранируются)
```[]\|{}()^$<>.*+?!```

### Якоря
```
^ - начало строки
$ - конец строки
\A - начало текста
\Z - конец текста
\b - граница слова
\B - не граница слова
\< - начало слова
\> -конец слова
```

Примеры:
* ```^a``` - **a**aa aaa
* ```a$``` - aaa aa**a**
* ```a\b``` - aa**a** aa**a**
* ```\ba``` - **a**aa **a**aa
* ```\Ba\B``` - a**a**a a**a**a
* ```\Ga``` - **aaa** aaa


### Диапазоны
```
. - любой символ (кроме \n)
(a|b) - a или b
(...) - группа
(?:...) - пассивная группа
[abc] - диапазон (a, b или c)
[^abc] - отрицательный диапозон (не a, не b, не c)
[a-q] - lower case диапазон
[A-Q] - upper case диапазон
[0-9] - любая цифра

# Примеры
[А-Яа-яЁё] - любая русская буква
([A-Za-z0-9]+) - весь латинский алфавит + цифры
```

### Специальные символы
```
\ - экранирующий символ
\n - новая строка
\r - возврат каретки
\t - табуляция
\v - вертикальная табуляция
\f - новая страница
\a - звуковой сигнал
[\b] - возврат на один символ
\e - escape-символ
\N{name} - именованный символ
```

### Символьные классы
```
\c - управляющий символ
\s - пробельный символ ~ [ \f\n\r\t\v]
\S - НЕ пробельный символ
\d - цифра ~ [0-9]
\D - НЕ цифра ~ [^0-9]
\w - слово ~ [[:word:]]
\W - НЕ слово
\0xxx - восьмиричный символ
\xhh - шестнадцатеричный символ
```

### Квантификаторы
```
* - 0 и более
*? - 0 и более (ленивый)
+ - 1 и более
+? - 1 и более (ленивый)
? - 0 или 1
?? - 0 или 1 (ленивый)
{3} - ровно 3
{3,} - 3 и более
{3,5} - от 3-х до 5-ти
{3,5}? - от 3-х до 5-ти (ленивый)
```

| Ревнивый | Жадный | Ленивый |
|----------|--------|---------|
| *+       | *      | *?      |
| ?+       | +      | +?      |
| {n,}+    | {n,}   | {n,}?   |

Квантификаторы являются жадными по умолчанию, т.е. некоторому шаблону по умолчанию будет соответствовать самая длинная строка из возможных.
Это решается:
1. Приведением шаблона в более сложный вид
2. Определением квантификатора как ленивого

Жадные и ленивые выражения для поска паттерна возвращаются к предыдущим шагам.
Но ревнивые квантификаторы не позволяют возвращаться. Они могут быть использованы для исключения нежелательных совпадений.

### Модификаторы шаблонов
Флаги указываются после паттерна
```
g - глобальный поиск
i - регистронезависимый шаблон
m - многострочный текст
s - считать текст одной строкой
x - разрешить комментарии и пробелы в шаблоне
e - выполнение подстановки
u - нежадный шаблон
```

### Подстановка строк
```
$n - n-ая непассивая группа
$` - перед найденной строкой
$' - после найденной строки
$+ - последняя найденная строка
$& - найденная строка целиком
$_ - исходный текст целиком
$$ - символ $
```

### Утверждения
```
?= - вперед смотрящее 
?! - отрицательное вперед смотрящее
?<= - назад смотрящее
? - отрицательное назад смотрящее
?> - однократное выражение
?() - условие (если, то)
?()| - условие (если, то, а иначе)
?# - комментарий
```

| Представление | Пример             | Соответствие                                 |
|---------------|--------------------|----------------------------------------------|
| (?=шаблон)    | Людовик (?=XVI)    | Людовик XV, **Людовик** XVI, Людовик LXV     |
| (?!шаблон)    | Людовик (?!XVI)    | **Людовик** XV, Людовик XVI, **Людовик** LXV |
| (?<=шаблон)   | (?<=Сергей) Иванов | Сергей **Иванов**, Игор Иванов               |
| (?<!шаблон)   | (?<!Сергей) Иванов | Сергей Иванов, Игор **Иванов**               |

### Символьные классы POSIX
```
[:upper:] - буквы в верхнем регистре
[:lower:] - буквы в нижнем регистре
[:alpha:] - все буквы
[:alnum:] - цифры и буквы
[:digit:] - цифры
[:xdigit:] - шестнадцатиричные цифры
[:punct:] - пунктуация
[:blank:] - пробел и табуляция
[:space:] - пустые символы
[:entrl:] - управляющие символы
[:graph:] - печатные символы
[:print:] - печатные символы и пробелы
[:word:] - буквы, цифры, подчеркивания
```

## re python
* [re docs](https://docs.python.org/3/library/re.html)
* [Tproger: Python RegEx: практическое применение регулярок](https://tproger.ru/translations/regular-expression-python/)
